<p id="notice"><%= notice %></p>

<p>
  <% if @post.header_image.attached? %>
      <%= image_tag @post.header_image.variant(resize: "600x500") %>
  <% end %>
</p>

<p>
  <strong>Title:</strong>
  <%= @post.title %>
</p>

<p>
  <strong>Body:</strong>
  <%= @post.body %>
</p>

<% if @post.attachments.attached? %>

  <fieldset><legend>Attachments</legend>

    <% 

      image_formats = [".jpg",".png",".gif",".jpeg"]
    
      @post.attachments.each do |file| 
        if image_formats.include? File.extname(file.filename.to_s)
          #puts file.filename.to_s
          #puts "is image"

    %>
        <%= file.signed_id %>
        <%= link_to 'Remove', delete_attachment_post_url(post_id: @post.id, id: file.blob_id), method: :delete %>
        <%= image_tag file.variant(resize: "320x200") %><hr>
    <%
        else 
          link_to file.filename, rails_blob_path(file, disposition: :attachment)
        end #end if
      end # end each
   %>

  </fieldset>

<% end %>

<%= link_to 'Edit', edit_post_path(@post) %> |
<%= link_to 'Back', posts_path %>
